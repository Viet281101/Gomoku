(function(){"use strict";function v(t,l){let s=0;const i=l==="X"?"O":"X",c=[{x:1,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:-1}],o=(n,e,f,u)=>{let h=0,x=0;for(let g=0;g<5;g++){const m=n+g*f,y=e+g*u;if(m<0||y<0||m>=t.length||y>=t.length)break;t[y][m]===l?h++:t[y][m]===i&&x++}if(h===5)return 1e4;if(x===5)return-1e4;h>0&&x===0&&(s+=Math.pow(10,h)),x>0&&h===0&&(s-=Math.pow(10,x))};for(let n=0;n<t.length;n++)for(let e=0;e<t.length;e++)(t[n][e]===l||t[n][e]===i)&&c.forEach(f=>o(e,n,f.x,f.y));return s}function M(t,l,s,i){const c=i==="X"?"O":"X",o=v(t,i);if(Math.abs(o)===1e4||l===0)return o;if(s){let n=-1/0;for(let e=0;e<t.length;e++)for(let f=0;f<t.length;f++)if(t[e][f]===""){t[e][f]=i;const u=M(t,l-1,!1,i);t[e][f]="",n=Math.max(n,u)}return n}else{let n=1/0;for(let e=0;e<t.length;e++)for(let f=0;f<t.length;f++)if(t[e][f]===""){t[e][f]=c;const u=M(t,l-1,!0,i);t[e][f]="",n=Math.min(n,u)}return n}}function X(t,l,s,i){let c={x:0,y:0},o=-1/0;for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)if(t[n][e]===""){t[n][e]=s;const f=M(t,l,!1,s);t[n][e]="",f>o&&(c={x:e,y:n},o=f)}setTimeout(()=>i(c),0)}self.onmessage=t=>{const{board:l,depth:s,player:i}=t.data;X(l,s,i,c=>{self.postMessage(c)})}})();
